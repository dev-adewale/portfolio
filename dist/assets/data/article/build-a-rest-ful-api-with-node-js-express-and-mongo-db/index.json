{"hash":"96ffdc8a1d857e18689492c35039a3e83765c1d6","data":{"post":{"title":"Build a RestFul API With Node.js, Express & MongoDB","path":"/article/build-a-rest-ful-api-with-node-js-express-and-mongo-db/","date":"09 Nov 2022","timeToRead":7,"content":"<p>In this detailed tutorial, we will be building a Rest API with <strong>Node.js</strong>, <strong>Express</strong> and <strong>MongoDB</strong> non-relational database. This API will expose endpoints that will allow for <strong>CRUD</strong> (Create, Read, Update, Delete) operations.</p>\n<br>\n<h3 id=\"prerequisites\"><a href=\"#prerequisites\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>#Prerequisites</h3>\n<br>\n<p>To follow along with the tutorial, you'll need to have the following specified tools installed üëá:</p>\n<br>\n<ul>\n<li><a href=\"nodejs.org\">Node</a></li>\n<li>MongoDB Compass</li>\n<li>A text/code editor of your choice</li>\n<li>A terminal</li>\n</ul>\n<br>\n<p>Also make sure you've mastered fundamentals of the following in order to sail through smoothly:</p>\n<br>\n<ul>\n<li>Node</li>\n<li>JavaScript</li>\n<li>MongoDB</li>\n<li>APIs</li>\n</ul>\n<br>\n<h3 id=\"to-do-lists\"><a href=\"#to-do-lists\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>#To-do lists</h3>\n<br>\n<p>What we are going to build is a Rest API where user details can be stored. Information such as <strong>Email</strong>, <strong>Name</strong>, &#x26; <strong>Phone number</strong> will be stored with each individual user. Since this is a CRUD API, 4 types of endpoint need to be exposed.</p>\n<br>\n<p>First, we will create our <strong>GET</strong> endpoint that will list all user details in our MongoDB database:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #D8DEE9FF\">GET /get</span></span></code></pre>\n<br>\n<p>We will be starting with an empty database. So, we need to create a <strong>POST</strong> endpoint that will allow us to add user details:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #D8DEE9FF\">POST /add</span></span></code></pre>\n<br>\n<p>The third endpoint will be the <strong>PATCH</strong> method, this will allow us to update users information when we need to:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #D8DEE9FF\">PATCH /update</span></span></code></pre>\n<br>\n<p>Finally, we have to create a <strong>DELETE</strong> endpoint incase we have to delete every information about a user:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #D8DEE9FF\">DELETE /remove</span></span></code></pre>\n<br>\n<p>By making these 4 endpoints, we will achieve our aim to create a CRUD API. Without wasting time further, open up any <strong>terminal</strong> of choice, I will be using <strong>Git bash</strong> terminal.</p>\n<br>\n<h3 id=\"creating-our-project\"><a href=\"#creating-our-project\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>#Creating our project</h3>\n<br>\n<p>We will kick off by making a folder called <strong>userApp</strong> for our project. Afterwards, initialize a <strong>package.json</strong> file in the root by typing the <strong>npm init -y</strong> command.</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #D8DEE9FF\">Dev.Adewale </span><span style=\"color: #81A1C1\">~</span><span style=\"color: #D8DEE9FF\">/documents $ mkdir userApp</span></span>\n\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">Dev.Adewale </span><span style=\"color: #81A1C1\">~</span><span style=\"color: #D8DEE9FF\">/documents $ </span><span style=\"color: #88C0D0\">cd</span><span style=\"color: #D8DEE9FF\"> userApp</span></span>\n\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">Dev.Adewale </span><span style=\"color: #81A1C1\">~</span><span style=\"color: #D8DEE9FF\">/documents/userApp $ npm init -y</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">Wrote to C:</span><span style=\"color: #EBCB8B\">\\U</span><span style=\"color: #D8DEE9FF\">sers</span><span style=\"color: #EBCB8B\">\\A</span><span style=\"color: #D8DEE9FF\">deyemi</span><span style=\"color: #EBCB8B\">\\d</span><span style=\"color: #D8DEE9FF\">ocuments</span><span style=\"color: #EBCB8B\">\\u</span><span style=\"color: #D8DEE9FF\">serApp</span><span style=\"color: #EBCB8B\">\\p</span><span style=\"color: #D8DEE9FF\">ackage.json:</span></span>\n\n<span class=\"line\"><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">name</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\">: </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">userapp</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">version</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\">: </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">1.0.0</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">description</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\">: </span><span style=\"color: #ECEFF4\">&quot;&quot;</span><span style=\"color: #D8DEE9FF\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">main</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\">: </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">index.js</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">scripts</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\">: </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">test</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\">: </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">echo </span><span style=\"color: #EBCB8B\">\\&quot;</span><span style=\"color: #A3BE8C\">Error: no test specified</span><span style=\"color: #EBCB8B\">\\&quot;</span><span style=\"color: #A3BE8C\"> &amp;&amp; exit 1</span><span style=\"color: #ECEFF4\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">keywords</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\">: </span><span style=\"color: #ECEFF4\">[]</span><span style=\"color: #D8DEE9FF\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">author</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\">: </span><span style=\"color: #ECEFF4\">&quot;&quot;</span><span style=\"color: #D8DEE9FF\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">license</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\">: </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">ISC</span><span style=\"color: #ECEFF4\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span></span></code></pre>\n<br>\n<p>After project initialization, we'll have to install all dependencies that will make it somewhat easy for us to build our API and it's <strong>CRUD</strong> endpoints. So, open your terminal again and install üëá:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #D8DEE9FF\">npm i express mongoose --save</span></span></code></pre>\n<br>\n<p>We have to install one more package, but to our <strong>devDependencies</strong> this time around:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #D8DEE9FF\">npm i nodemon --save-dev</span></span></code></pre>\n<br>\n<p>Here's a breakdown of what we installed üïµÔ∏è‚Äç‚ôÇÔ∏è:</p>\n<br>\n<h3 id=\"express\"><a href=\"#express\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>#Express</h3>\n<br>\n<p>Express is a fast, minimal and flexible <strong>Node</strong> web application framework. It comes with robust set of features that will allow us spin up our API <strong>Server</strong> without much complexity.</p>\n<br>\n<h3 id=\"mongoose\"><a href=\"#mongoose\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>#Mongoose</h3>\n<br>\n<p>We installed the <strong>mongoose</strong> package instead of <strong>mongodb</strong> earlier, wondering why? It's because Mongoose is a wrapper package that provides more advanced features than using the MongoDB package.</p>\n<br>\n<p>Mongoose is an Object Data Modeling (ODM) library that manages relationships between data, provides schema validation, and is used to create a connection between MongoDB and the Node.js runtime environment.<br></br></p>\n<h3 id=\"nodemon\"><a href=\"#nodemon\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>#Nodemon</h3>\n<br>\n<p>While installing our dependencies, <strong>nodemon</strong> was installed to the <strong>devDependencies</strong> section. Why? We really don't need this package in production, it's only useful while developing locally. Nodemon is a Node app wrapper that will watch for any file changes in our project and automatically restart our server.</p>\n<br>\n<p>Without it, we will have to restart the server manually everytime we make changes to any file in our project folder. Yikes üòñ, that will be stressful!</p>\n<br>\n<p>Now, let's get our hands dirty with code...</p>\n<br>\n<h3 id=\"start-coding\"><a href=\"#start-coding\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>#Start coding</h3>\n<br>\n<p>Create a <strong>server.js</strong> file in the project root folder. You can name the JS file anything, it doesn't matter. This will be the entry point to our app. To start coding, open the <strong>package.json</strong> file and edit it like so üëá:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">name</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">userapp</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">version</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">1.0.0</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">description</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;&quot;</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">main</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">index.js</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">scripts</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">dev</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">nodemon server.js</span><span style=\"color: #ECEFF4\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">},</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">keywords</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">[],</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">   </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">type</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">module</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">author</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;&quot;</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">license</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">ISC</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">dependencies</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">express</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">^4.18.2</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">mongoose</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">^6.7.2</span><span style=\"color: #ECEFF4\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">},</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">devDependencies</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #8FBCBB\">nodemon</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">^2.0.20</span><span style=\"color: #ECEFF4\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span><span style=\"color: #ECEFF4\">}</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span></span></code></pre>\n<br>\n<p>What changed? If you noticed, we add a new text <strong>\"type\": \"module\"</strong>. This is notify the package file that we will be using <strong>ES6</strong> syntax whenever we're importing a package in our code.</p>\n<br>\n<p>We also added a script of <strong>\"dev\": \"nodemon server.js\"</strong>. This will spin up our server, watch for file changes and automatically restart the server for us.</p>\n<br>\n<p>In <strong>server.js</strong>, write the following code:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #616E88\">/* Import express */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">import</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">express</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">from</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">express</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* Initialize express import */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">app</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">express</span><span style=\"color: #D8DEE9FF\">()</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* Listen to server on a port */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">PORT</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">process</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">env</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">PORT</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">||</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">3000</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9\">app</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">listen</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">PORT</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #D8DEE9\">console</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">log</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">`</span><span style=\"color: #A3BE8C\">it&#39;s alive on http://localhost:</span><span style=\"color: #81A1C1\">${</span><span style=\"color: #D8DEE9\">PORT</span><span style=\"color: #81A1C1\">}</span><span style=\"color: #ECEFF4\">`</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span></span></code></pre>\n<br>\n<p>We imported the <strong>express</strong> package, stored and intialized it in a variable. The <strong>app</strong> variable will now give us access to all <strong>express</strong> has to offer. At the end of the code, we started listening to our server on a port. Now open your terminal again and run <strong>npm run dev</strong>, the name of the script we created in the <strong>package.json</strong> file. You should get the output below üëá:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #D8DEE9\">Dev</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">Adewale</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">~/</span><span style=\"color: #D8DEE9\">mongodb</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">$</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">npm</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">run</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">dev</span></span>\n\n<span class=\"line\"><span style=\"color: #81A1C1\">&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">userapp</span><span style=\"color: #D8DEE9FF\">@</span><span style=\"color: #B48EAD\">1.0</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #B48EAD\">0</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">dev</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">nodemon</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">server</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">js</span></span>\n\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">[</span><span style=\"color: #D8DEE9\">nodemon</span><span style=\"color: #D8DEE9FF\">] </span><span style=\"color: #B48EAD\">2.0</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #B48EAD\">20</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">[</span><span style=\"color: #D8DEE9\">nodemon</span><span style=\"color: #D8DEE9FF\">] </span><span style=\"color: #D8DEE9\">to</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">restart</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">at</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">any</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">time</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">enter</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">`</span><span style=\"color: #A3BE8C\">rs</span><span style=\"color: #ECEFF4\">`</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">[</span><span style=\"color: #D8DEE9\">nodemon</span><span style=\"color: #D8DEE9FF\">] </span><span style=\"color: #D8DEE9\">watching</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">path</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">s</span><span style=\"color: #D8DEE9FF\">): </span><span style=\"color: #81A1C1\">*</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #81A1C1\">*</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">[</span><span style=\"color: #D8DEE9\">nodemon</span><span style=\"color: #D8DEE9FF\">] </span><span style=\"color: #D8DEE9\">watching</span><span style=\"color: #D8DEE9FF\"> extensions</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">js</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9\">mjs</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9\">json</span><span style=\"color: #D8DEE9FF\">  </span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">[</span><span style=\"color: #D8DEE9\">nodemon</span><span style=\"color: #D8DEE9FF\">] </span><span style=\"color: #D8DEE9\">starting</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">`</span><span style=\"color: #A3BE8C\">node server.js</span><span style=\"color: #ECEFF4\">`</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9\">it</span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #A3BE8C\">s alive on http://localhost:300</span><span style=\"color: #D8DEE9\">0</span></span></code></pre>\n<br>\n<p>Now that our server is up and running, let's connect to our MongoDB database. But first, open up <strong>MongoDB Compass</strong> and grab your local database installation <strong>URI</strong>. Then, create a <strong>db.js</strong> file in the project root folder and make the following changes üëá:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #616E88\">/* Import mongoose */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">import</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">mongoose</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">from</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">mongoose</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* Store local MongoDB uri ending with your database name */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">uri</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">mongodb://localhost:27017/UserDB</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #616E88\">/* &lt;- Database name */</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* Connect to DB */</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9\">mongoose</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">connect</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">uri</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">useNewUrlParser</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">true</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* Store connection instance */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">db</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">mongoose</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">connection</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* Callback function to let us know when we&#39;re connected */</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9\">db</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">once</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">open</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #D8DEE9\">console</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">log</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">Connected to MongoDB!</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* Export the store connection instance */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">export</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">default</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">db</span></span></code></pre>\n<br>\n<p>Now navigate back to the <strong>server.js</strong> file and import the <strong>db.js</strong> file at the top-level:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #616E88\">/* Import database connection to MongoDB */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">import</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">db</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">from</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">./db.js</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">;</span></span></code></pre>\n<br>\n<p>Afterwards, you should see some additional changes in the terminal output like below üëá:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #D8DEE9FF\">Dev.Adewale </span><span style=\"color: #81A1C1\">~</span><span style=\"color: #D8DEE9FF\">/mongodb $ npm run dev</span></span>\n\n<span class=\"line\"><span style=\"color: #81A1C1\">&gt;</span><span style=\"color: #D8DEE9FF\"> userapp@1.0.0 dev</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">&gt;</span><span style=\"color: #D8DEE9FF\"> nodemon server.js</span></span>\n\n<span class=\"line\"><span style=\"color: #ECEFF4\">[</span><span style=\"color: #D8DEE9FF\">nodemon</span><span style=\"color: #ECEFF4\">]</span><span style=\"color: #D8DEE9FF\"> 2.0.20</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">[</span><span style=\"color: #D8DEE9FF\">nodemon</span><span style=\"color: #ECEFF4\">]</span><span style=\"color: #D8DEE9FF\"> to restart at any time, enter </span><span style=\"color: #ECEFF4\">`</span><span style=\"color: #A3BE8C\">rs</span><span style=\"color: #ECEFF4\">`</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">[</span><span style=\"color: #D8DEE9FF\">nodemon</span><span style=\"color: #ECEFF4\">]</span><span style=\"color: #D8DEE9FF\"> watching path</span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9FF\">s</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #D8DEE9FF\">: </span><span style=\"color: #81A1C1\">*</span><span style=\"color: #D8DEE9FF\">.</span><span style=\"color: #81A1C1\">*</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">[</span><span style=\"color: #D8DEE9FF\">nodemon</span><span style=\"color: #ECEFF4\">]</span><span style=\"color: #D8DEE9FF\"> watching extensions: js,mjs,json  </span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">[</span><span style=\"color: #D8DEE9FF\">nodemon</span><span style=\"color: #ECEFF4\">]</span><span style=\"color: #D8DEE9FF\"> starting </span><span style=\"color: #ECEFF4\">`</span><span style=\"color: #A3BE8C\">node server.js</span><span style=\"color: #ECEFF4\">`</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">it</span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #A3BE8C\">s alive on http://localhost:3000</span></span>\n<span class=\"line\"><span style=\"color: #A3BE8C\">Connected to MongoDB!</span></span></code></pre>\n<br>\n<p>Next, we will be creating a model that will enforce the structure of user's data that will be stored in our database. Create a <strong>model</strong> folder in the project root folder and also create a <strong>User.js</strong> file inside it. Let's make some changes üëá:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #616E88\">/* Import mongoose */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">import</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">mongoose</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">from</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">mongoose</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* Create a schema */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">userSchema</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">new</span><span style=\"color: #D8DEE9FF\"> mongoose</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9FF\">Schema(</span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">  </span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">email</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">type</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">String</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">required</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">true</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">},</span></span>\n\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">name</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">type</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">String</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">required</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">true</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">},</span></span>\n\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #88C0D0\">phoneNumber</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">type</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">Number</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">required</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">true</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span></span>\n\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* Export the model */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">export</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">default</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">mongoose</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">model</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">Users</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">userSchema</span><span style=\"color: #D8DEE9FF\">)</span></span></code></pre>\n<br>\n<p>We also have to setup routes handler that will respond to our endpoints. First create a <strong>routes</strong> folder containing <strong>router.js</strong> file. Make changes to the <strong>router.js</strong> file like so üëá:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #616E88\">/* Import express */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">import</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">express</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">from</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #A3BE8C\">express</span><span style=\"color: #ECEFF4\">&#39;</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* Init express Router */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">Router</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">express</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">Router</span><span style=\"color: #D8DEE9FF\">()</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* Export the Router variable */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">export</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">default</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">Router</span></span></code></pre>\n<br> \n<p>In the <strong>server.js</strong> file, we have to create a <strong>middleware</strong> that will intercept every request we're getting and redirect them to the <strong>router.js</strong> file where they will be handled üëá:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #616E88\">/* Import express */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">import</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">express</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">from</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">express</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* Import database connection to MongoDB */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">import</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">db</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">from</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">./db.js</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* Import Router */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">import</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">Router</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">from</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #A3BE8C\">./routes/router.js</span><span style=\"color: #ECEFF4\">&quot;</span><span style=\"color: #81A1C1\">;</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* Init express instance */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">app</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #88C0D0\">express</span><span style=\"color: #D8DEE9FF\">()</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* MIDDLEWARE STARTS */</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* Redirect requests to Router */</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9\">app</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">use</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #A3BE8C\">/</span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">Router</span><span style=\"color: #D8DEE9FF\">)</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* MIDDLEWARE ENDS */</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* Listening to port */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">PORT</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">process</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">env</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">PORT</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">||</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #B48EAD\">3000</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9\">app</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">listen</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">PORT</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">()</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #D8DEE9\">console</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">log</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">`</span><span style=\"color: #A3BE8C\">it&#39;s alive on http://localhost:</span><span style=\"color: #81A1C1\">${</span><span style=\"color: #D8DEE9\">PORT</span><span style=\"color: #81A1C1\">}</span><span style=\"color: #ECEFF4\">`</span><span style=\"color: #D8DEE9FF\">)</span><span style=\"color: #81A1C1\">;</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span></span></code></pre>\n<br>\n<p>We can now proceed to setup every endpoints in the <strong>router.js</strong> file. The first endpoint is the <strong>GET</strong> method, import the <strong>model</strong> created earlier in the router file. Then it can be used to communicate with our MongoDB database üëá:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #616E88\">/* Import mongoose schema */</span></span>\n<span class=\"line\"><span style=\"color: #81A1C1\">import</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #8FBCBB\">User</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">from</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #A3BE8C\">../model/User.js</span><span style=\"color: #ECEFF4\">&#39;</span></span>\n\n<span class=\"line\"><span style=\"color: #616E88\">/* Get all method */</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9\">Router</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">get</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #A3BE8C\">/get</span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">async</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">req</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">res</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">get</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">await</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">User</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">find</span><span style=\"color: #D8DEE9FF\">()</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #D8DEE9\">res</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">send</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">get</span><span style=\"color: #D8DEE9FF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span></span></code></pre>\n<br>\n<p>Now find an <strong>API client</strong> to test our first endpoint, I recommend <strong>Postman</strong> or <strong>Insomnia</strong> if you prefer a desktop client. Paste in the <strong>localhost</strong> URL followed by the corresponding <strong>endpoint</strong>. It should look like so üëâ: <strong><a href=\"http://localhost:3000/get\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://localhost:3000/get</a></strong>.</p>\n<br>\n<p>Note that you're going to get an empty response for now because we have nothing in our database. Next, we're going to create a <strong>POST</strong> endpoint and fill our database with some documents.</p>\n<br>\n<p>Navigate back to <strong>router.js</strong> and setup the <strong>POST</strong> endpoint üëá:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #616E88\">/* Post method */</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9\">Router</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">post</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #A3BE8C\">/add</span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">async</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">req</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">res</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">addUser</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">new</span><span style=\"color: #D8DEE9FF\"> User(</span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">email</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">req</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">body</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">email</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">name</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">req</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">body</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">name</span><span style=\"color: #ECEFF4\">,</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">        </span><span style=\"color: #88C0D0\">phoneNumber</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">req</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">body</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">phoneNumber</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span></span>\n\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">await</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">addUser</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">save</span><span style=\"color: #D8DEE9FF\">()</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #D8DEE9\">res</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">send</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">addUser</span><span style=\"color: #D8DEE9FF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span></span></code></pre>\n<br>\n<p>To test our post endpoint, open up any API client you're using and send a POST request. Check your <strong>MongoDB Compass</strong> afterwards and you should see a new <strong>Database name</strong> with a <strong>Collection</strong> containing the <strong>data</strong> you just sent.</p>\n<br>\n<p>The <strong>POST</strong> endpoint is up, what if we have to delete a user data? Let's continue by creating a <strong>DELETE</strong> endpoint in the <strong>router.js</strong> file üëá:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #616E88\">/* Delete method */</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9\">Router</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">delete</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #A3BE8C\">/remove/:id</span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">async</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">req</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">res</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">remove</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">await</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">User</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">deleteOne</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">{</span><span style=\"color: #88C0D0\">_id</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">req</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">params</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">id</span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #D8DEE9\">res</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">send</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">remove</span><span style=\"color: #D8DEE9FF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span></span></code></pre>\n<br>\n<p>The last endpoint we will be creating is the <strong>PATCH</strong> method, this will allow us to edit and update existing users data store in our database. Navigate back to the <strong>router.js</strong> file and make new changes üëá:</p>\n<br>\n<pre class=\"shiki\" style=\"background-color: #2e3440ff\"><code><span class=\"line\"><span style=\"color: #616E88\">/* Patch method */</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9\">Router</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">patch</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #A3BE8C\">/update/:id</span><span style=\"color: #ECEFF4\">&#39;</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">async</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">(</span><span style=\"color: #D8DEE9\">req</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">res</span><span style=\"color: #ECEFF4\">)</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=&gt;</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #81A1C1\">const</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">update</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">=</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">await</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">User</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">findByIdAndUpdate</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">req</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">params</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">id</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #D8DEE9\">req</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #D8DEE9\">body</span><span style=\"color: #ECEFF4\">,</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #ECEFF4\">{</span><span style=\"color: #88C0D0\">new</span><span style=\"color: #ECEFF4\">:</span><span style=\"color: #D8DEE9FF\"> </span><span style=\"color: #81A1C1\">true</span><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span></span>\n<span class=\"line\"><span style=\"color: #D8DEE9FF\">    </span><span style=\"color: #D8DEE9\">res</span><span style=\"color: #ECEFF4\">.</span><span style=\"color: #88C0D0\">send</span><span style=\"color: #D8DEE9FF\">(</span><span style=\"color: #D8DEE9\">update</span><span style=\"color: #D8DEE9FF\">)</span></span>\n<span class=\"line\"><span style=\"color: #ECEFF4\">}</span><span style=\"color: #D8DEE9FF\">)</span></span></code></pre>\n<br>\n<p>Make sure to test if all endpoints is functional and working as expected in any API client of your choice. If you have any questions or you're getting an error, be sure to comment. I will try to give a valid response as soon as I can. Bye for now üôã‚Äç‚ôÇÔ∏è!</p>\n","tags":[{"id":"backend","title":"backend","path":"/tag/backend/"},{"id":"api","title":"api","path":"/tag/api/"}]}},"context":{}}