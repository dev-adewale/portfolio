<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Gridsome - Gridsome</title><meta name="gridsome:hash" content="e5b6bd9226e757b03a0150ff3138350c7864e74c"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><link rel="preload" href="/assets/css/7.styles.e6eeb8bf.css" as="style"><link rel="preload" href="/assets/js/app.cddbf094.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-articles-vue.3c524e7d.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules-gridsome-app-pages-404-vue.c341f70d.js"><link rel="prefetch" href="/assets/js/page--src-pages-articles-vue.a2c93b45.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.5fdd784c.js"><link rel="prefetch" href="/assets/js/page--src-pages-projects-vue.f1cab643.js"><link rel="prefetch" href="/assets/js/page--src-templates-tag-vue.e243c907.js"><link rel="stylesheet" href="/assets/css/7.styles.e6eeb8bf.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app"><header class="contain flex justify-between items-center h-40"><h1 class="text-3xl text-dimGrey font-bold"><a href="/" class="active">üöÄAdex</a></h1><nav class="hidden md:flex items-center gap-3 text-green"><a href="/" class="hover:underline border-r-2 border-dashed border-green pr-4 active">Home</a><a href="/projects/" class="hover:underline">Projects</a><a href="/articles/" class="hover:underline border-l-2 border-dashed border-green pl-4">Articles</a></nav><div class="md:hidden block"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="svg-inline--fa fa-bars fa-lg"><path fill="currentColor" d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"></path></svg></div></header><article class="contain mt-14 mb-14"><div class="flex md:flex-row flex-col justify-between md:items-center items-start mb-14"><div><h1 class="font-semibold text-2xl mb-5">Build a RestFul API With Node.js, Express &amp; MongoDB</h1><div class="flex items-center text-dimGrey text-sl"><p class="border-r-2 border-solid border-dimGrey pr-3">
            09 Nov 2022
          </p><p class="pl-3">‚òï 7 min read</p></div></div><div class="flex items-center gap-1 mt-3 md:mt-0"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="svg-inline--fa fa-tags fa-lg"><path fill="currentColor" d="M345 39.1L472.8 168.4c52.4 53 52.4 138.2 0 191.2L360.8 472.9c-9.3 9.4-24.5 9.5-33.9 .2s-9.5-24.5-.2-33.9L438.6 325.9c33.9-34.3 33.9-89.4 0-123.7L310.9 72.9c-9.3-9.4-9.2-24.6 .2-33.9s24.6-9.2 33.9 .2zM0 229.5V80C0 53.5 21.5 32 48 32H197.5c17 0 33.3 6.7 45.3 18.7l168 168c25 25 25 65.5 0 90.5L277.3 442.7c-25 25-65.5 25-90.5 0l-168-168C6.7 262.7 0 246.5 0 229.5zM144 144c0-17.7-14.3-32-32-32s-32 14.3-32 32s14.3 32 32 32s32-14.3 32-32z"></path></svg><a href="/tag/backend/" class="underline underline-offset-4">
          #backend
        </a><a href="/tag/api/" class="underline underline-offset-4">
          #api
        </a></div></div><main class="text-dimGrey"><p>In this detailed tutorial, we will be building a Rest API with <strong>Node.js</strong>, <strong>Express</strong> and <strong>MongoDB</strong> non-relational database. This API will expose endpoints that will allow for <strong>CRUD</strong> (Create, Read, Update, Delete) operations.<br></br></p>
<h3 id="prerequisites"><a href="#prerequisites" aria-hidden="true"><span class="icon icon-link"></span></a>#Prerequisites</h3>
<br>
To follow along with the tutorial, you'll need to have the following specified tools installed üëá:<br></br>
<ul>
<li><a href="nodejs.org">Node</a></li>
<li>MongoDB Compass</li>
<li>A text/code editor of your choice</li>
<li>A terminal
<br></br></li>
</ul>
<p>Also make sure you've mastered fundamentals of the following in order to sail through smoothly:<br></br></p>
<ul>
<li>Node</li>
<li>JavaScript</li>
<li>MongoDB</li>
<li>APIs
<br></br></li>
</ul>
<h3 id="to-do-lists"><a href="#to-do-lists" aria-hidden="true"><span class="icon icon-link"></span></a>#To-do lists</h3>
<br>
<p>What we are going to build is a Rest API where user details can be stored. Information such as <strong>Email</strong>, <strong>Name</strong>, &#x26; <strong>Phone number</strong> will be stored with each individual user. Since this is a CRUD API, 4 types of endpoint need to be exposed.<br></p>
<p>First, we will create our <strong>GET</strong> endpoint that will list all user details in our MongoDB database: <br></br></p>
<pre><code class="language-bash">GET /get
</code></pre>
<br>
<p>We will be starting with an empty database. So, we need to create a <strong>POST</strong> endpoint that will allow us to add user details:<br></br></p>
<pre><code class="language-bash">POST /add
</code></pre>
<br>
<p>The third endpoint will be the <strong>PATCH</strong> method, this will allow us to update users information when we need to:<br></br></p>
<pre><code class="language-bash">PATCH /update
</code></pre>
<br>
<p>Finally, we have to create a <strong>DELETE</strong> endpoint incase we have to delete every information about a user:<br></br></p>
<pre><code class="language-bash">DELETE /remove
</code></pre>
<br>
<p>By making these 4 endpoints, we will achieve our aim to create a CRUD API. Without wasting time further, open up any <strong>terminal</strong> of choice, I will be using <strong>Git bash</strong> terminal.<br></br></p>
<h3 id="creating-our-project"><a href="#creating-our-project" aria-hidden="true"><span class="icon icon-link"></span></a>#Creating our project</h3>
<br>
<p>We will kick off by making a folder called <strong>userApp</strong> for our project. Afterwards, initialize a <strong>package.json</strong> file in the root by typing the <strong>npm init -y</strong> command.<br></br></p>
<pre><code class="language-bash">Dev.Adewale ~/documents $ mkdir userApp

Dev.Adewale ~/documents $ cd userApp

Dev.Adewale ~/documents/userApp $ npm init -y
Wrote to C:\Users\Adeyemi\documents\userApp\package.json:

{
  "name": "userapp",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" &#x26;&#x26; exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}
</code></pre>
<p><br></br></p>
<p>After project initialization, we'll have to install all dependencies that will make it somewhat easy for us to build our API and it's <strong>CRUD</strong> endpoints. So, open your terminal again and install üëá:<br></br></p>
<pre><code class="language-bash">npm i express mongoose --save
</code></pre>
<br>
<p>We have to install one more package, but to our <strong>devDependencies</strong> this time around:<br></br></p>
<pre><code class="language-bash">npm i nodemon --save-dev
</code></pre>
<br>
<p>Here's a breakdown of what we installed üïµÔ∏è‚Äç‚ôÇÔ∏è:<br></br></p>
<h3 id="express"><a href="#express" aria-hidden="true"><span class="icon icon-link"></span></a>#Express</h3>
<br>
<p>Express is a fast, minimal and flexible <strong>Node</strong> web application framework. It comes with robust set of features that will allow us spin up our API <strong>Server</strong> without much complexity.
<br></br></p>
<h3 id="mongoose"><a href="#mongoose" aria-hidden="true"><span class="icon icon-link"></span></a>#Mongoose</h3>
<br>
<p>We installed the <strong>mongoose</strong> package instead of <strong>mongodb</strong> earlier, wondering why? It's because Mongoose is a wrapper package that provides more advanced features than using the MongoDB package.</p>
<br>
Mongoose is an Object Data Modeling (ODM) library that manages relationships between data, provides schema validation, and is used to create a connection between MongoDB and the Node.js runtime environment.<br></br>
<h3 id="nodemon"><a href="#nodemon" aria-hidden="true"><span class="icon icon-link"></span></a>#Nodemon</h3>
<br>
<p>While installing our dependencies, <strong>nodemon</strong> was installed to the <strong>devDependencies</strong> section. Why? We really don't need this package in production, it's only useful while developing locally. Nodemon is a Node app wrapper that will watch for any file changes in our project and automatically restart our server.
<br></br>
Without it, we will have to restart the server manually everytime we make changes to any file in our project folder. Yikes üòñ, that will be stressful!</p>
<br>
<p>Now, let's get our hands dirty with code...
<br></br></p>
<h3 id="start-coding"><a href="#start-coding" aria-hidden="true"><span class="icon icon-link"></span></a>#Start coding</h3>
<br>
<p>Create a <strong>server.js</strong> file in the project root folder. You can name the JS file anything, it doesn't matter. This will be the entry point to our app. To start coding, open the <strong>package.json</strong> file and edit it like so üëá: <br></br></p>
<pre><code class="language-json">{
  "name": "userapp",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "dev": "nodemon server.js"
  },
  "keywords": [],
   "type": "module",
  "author": "",
  "license": "ISC",
  "dependencies": {
    "express": "^4.18.2",
    "mongoose": "^6.7.2"
  },
  "devDependencies": {
    "nodemon": "^2.0.20"
  }
}
</code></pre>
<br>
<p>What changed? If you noticed, we add a new text <strong>"type": "module"</strong>. This is notify the package file that we will be using <strong>ES6</strong> syntax whenever we're importing a package in our code. <br></br></p>
<p>We also added a script of <strong>"dev": "nodemon server.js"</strong>. This will spin up our server, watch for file changes and automatically restart the server for us. <br></br></p>
<p>In <strong>server.js</strong>, write the following code:<br></br></p>
<pre><code class="language-javascript">/* Import express */
import express from "express";

/* Initialize express import */
const app = express()

/* Listen to server on a port */
const PORT = process.env.PORT || 3000
app.listen(PORT, () => {
    console.log(`it's alive on http://localhost:${PORT}`);
})
</code></pre>
<br>
<p>We imported the <strong>express</strong> package, stored and intialized it in a variable. The <strong>app</strong> variable will now give us access to all <strong>express</strong> has to offer. At the end of the code, we started listening to our server on a port. Now open your terminal again and run <strong>npm run dev</strong>, the name of the script we created in the <strong>package.json</strong> file. You should get the output below üëá:</p>
<br>
<pre><code class="language-javascript">Dev.Adewale ~/mongodb $ npm run dev

> userapp@1.0.0 dev
> nodemon server.js

[nodemon] 2.0.20
[nodemon] to restart at any time, enter `rs`
[nodemon] watching path(s): *.*
[nodemon] watching extensions: js,mjs,json  
[nodemon] starting `node server.js`
it's alive on http://localhost:3000
</code></pre>
<br>
<p>Now that our server is up and running, let's connect to our MongoDB database. But first, open up <strong>MongoDB Compass</strong> and grab your local database installation <strong>URI</strong>. Then, create a <strong>db.js</strong> file in the project root folder and make the following changes üëá:</p>
<br>
<pre><code class="language-javascript">/* Import mongoose */
import mongoose from "mongoose";

/* Store local MongoDB uri ending with your database name */
const uri = "mongodb://localhost:27017/UserDB" /* &#x3C;- Database name */

/* Connect to DB */
mongoose.connect(uri, {
    useNewUrlParser: true
})

/* Store connection instance */
const db = mongoose.connection

/* Callback function to let us know when we're connected */
db.once("open", () => {
    console.log("Connected to MongoDB!");
})

/* Export the store connection instance */
export default db
</code></pre>
<br>
<p>Now navigate back to the <strong>server.js</strong> file and import the <strong>db.js</strong> file at the top-level:</p>
<br>
<pre><code class="language-javascript">/* Import database connection to MongoDB */
import db from "./db.js";
</code></pre>
<br>
<p>Afterwards, you should see some additional changes in the terminal output like below üëá:</p>
<br>
<pre><code class="language-bash">Dev.Adewale ~/mongodb $ npm run dev

> userapp@1.0.0 dev
> nodemon server.js

[nodemon] 2.0.20
[nodemon] to restart at any time, enter `rs`
[nodemon] watching path(s): *.*
[nodemon] watching extensions: js,mjs,json  
[nodemon] starting `node server.js`
it's alive on http://localhost:3000
Connected to MongoDB!
</code></pre>
<br>
<p>Next, we will be creating a model that will enforce the structure of user's data that will be stored in our database. Create a <strong>model</strong> folder in the project root folder and also create a <strong>User.js</strong> file inside it. Let's make some changes üëá:</p>
<br>
<pre><code class="language-javascript">/* Import mongoose */
import mongoose from "mongoose";

/* Create a schema */
const userSchema = new mongoose.Schema({
  
    email: {
        type: String,
        required: true
    },

    name: {
        type: String,
        required: true
    },

    phoneNumber: {
        type: Number,
        required: true
    }

})

/* Export the model */
export default mongoose.model("Users", userSchema)
</code></pre>
<br>
<p>We also have to setup routes handler that will respond to our endpoints. First create a <strong>routes</strong> folder containing <strong>router.js</strong> file. Make changes to the <strong>router.js</strong> file like so üëá:</p>
<br>
<pre><code class="language-javascript">/* Import express */
import express from 'express'

/* Init express Router */
const Router = express.Router()

/* Export the Router variable */
export default Router
</code></pre>
<br> 
<p>In the <strong>server.js</strong> file, we have to create a <strong>middleware</strong> that will intercept every request we're getting and redirect them to the <strong>router.js</strong> file where they will be handled üëá:</p>
<br>
<pre><code class="language-javascript">/* Import express */
import express from "express";

/* Import database connection to MongoDB */
import db from "./db.js";

/* Import Router */
import Router from "./routes/router.js";

/* Init express instance */
const app = express()

/* MIDDLEWARE STARTS */

/* Redirect requests to Router */
app.use('/', Router)

/* MIDDLEWARE ENDS */

/* Listening to port */
const PORT = process.env.PORT || 3000
app.listen(PORT, () => {
    console.log(`it's alive on http://localhost:${PORT}`);
})
</code></pre>
<br>
<p>We can now proceed to setup every endpoints in the <strong>router.js</strong> file. The first endpoint is the <strong>GET</strong> method, import the <strong>model</strong> created earlier in the router file. Then it can be used to communicate with our MongoDB database üëá:</p>
<br>
<pre><code class="language-javascript">/* Import mongoose schema */
import User from '../model/User.js'

/* Get all method */
Router.get('/get', async (req, res) => {

    const get = await User.find()
    res.send(get)
})
</code></pre>
<br>
<p>Now find an <strong>API client</strong> to test our first endpoint, I recommend <strong>Postman</strong> or <strong>Insomnia</strong> if you prefer a desktop client. Paste in the <strong>localhost</strong> URL followed by the corresponding <strong>endpoint</strong>. It should look like so üëâ: <strong><a href="http://localhost:3000/get" target="_blank" rel="nofollow noopener noreferrer">http://localhost:3000/get</a></strong>.</p>
<br>
<p>Note that you're going to get an empty response for now because we have nothing in our database. Next, we're going to create a <strong>POST</strong> endpoint and fill our database with some documents.</p>
<br>
<p>Navigate back to <strong>router.js</strong> and setup the <strong>POST</strong> endpoint üëá:</p>
<br>
<pre><code class="language-javascript">/* Post method */
Router.post('/add', async (req, res) => {

    const addUser = new User({
        email: req.body.email,
        name: req.body.name,
        phoneNumber: req.body.phoneNumber
    })

    await addUser.save()
    res.send(addUser)
})
</code></pre>
<br>
<p>To test our post endpoint, open up any API client you're using and send a POST request. Check your <strong>MongoDB Compass</strong> afterwards and you should see a new <strong>Database name</strong> with a <strong>Collection</strong> containing the <strong>data</strong> you just sent.</p>
<br>
<p>The <strong>POST</strong> endpoint is up, what if we have to delete a user data? Let's continue by creating a <strong>DELETE</strong> endpoint in the <strong>router.js</strong> file üëá:</p>
<br>
<pre><code class="language-javascript">/* Delete method */
Router.delete('/remove/:id', async (req, res) => {
    
    const remove = await User.deleteOne({_id: req.params.id})
    res.send(remove)
})
</code></pre>
<br>
<p>The last endpoint we will be creating is the <strong>PATCH</strong> method, this will allow us to edit and update existing users data store in our database. Navigate back to the <strong>router.js</strong> file and make new changes üëá:</p>
<br>
<pre><code class="language-javascript">/* Patch method */
Router.patch('/update/:id', async (req, res) => {
    
    const update = await User.findByIdAndUpdate(req.params.id, req.body, {new: true})
    res.send(update)
})
</code></pre>
<br>
<p>Make sure to test if all endpoints is functional and working as expected in any API client of your choice. If you have any questions or you're getting an error, be sure to comment. I will try to give a valid response as soon as I can. Bye for now üôã‚Äç‚ôÇÔ∏è!</p>
</main></article><footer class="contain flex justify-between mb-5 text-sl text-dimGreyAlt"><p>Copyright ¬© 2022 üöÄ</p><nav class="flex gap-2"><a href class="border-r-2 border-solid border-dimGreyAlt pr-3">RSS</a><a href>Sitemap</a></nav></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Build a RestFul API With Node.js, Express & MongoDB","path":"\u002Farticle\u002Fbuild-a-rest-ful-api-with-node-js-express-and-mongo-db\u002F","date":"09 Nov 2022","timeToRead":7,"content":"\u003Cp\u003EIn this detailed tutorial, we will be building a Rest API with \u003Cstrong\u003ENode.js\u003C\u002Fstrong\u003E, \u003Cstrong\u003EExpress\u003C\u002Fstrong\u003E and \u003Cstrong\u003EMongoDB\u003C\u002Fstrong\u003E non-relational database. This API will expose endpoints that will allow for \u003Cstrong\u003ECRUD\u003C\u002Fstrong\u003E (Create, Read, Update, Delete) operations.\u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Ch3 id=\"prerequisites\"\u003E\u003Ca href=\"#prerequisites\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E#Prerequisites\u003C\u002Fh3\u003E\n\u003Cbr\u003E\nTo follow along with the tutorial, you'll need to have the following specified tools installed üëá:\u003Cbr\u003E\u003C\u002Fbr\u003E\n\u003Cul\u003E\n\u003Cli\u003E\u003Ca href=\"nodejs.org\"\u003ENode\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EMongoDB Compass\u003C\u002Fli\u003E\n\u003Cli\u003EA text\u002Fcode editor of your choice\u003C\u002Fli\u003E\n\u003Cli\u003EA terminal\n\u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EAlso make sure you've mastered fundamentals of the following in order to sail through smoothly:\u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003ENode\u003C\u002Fli\u003E\n\u003Cli\u003EJavaScript\u003C\u002Fli\u003E\n\u003Cli\u003EMongoDB\u003C\u002Fli\u003E\n\u003Cli\u003EAPIs\n\u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch3 id=\"to-do-lists\"\u003E\u003Ca href=\"#to-do-lists\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E#To-do lists\u003C\u002Fh3\u003E\n\u003Cbr\u003E\n\u003Cp\u003EWhat we are going to build is a Rest API where user details can be stored. Information such as \u003Cstrong\u003EEmail\u003C\u002Fstrong\u003E, \u003Cstrong\u003EName\u003C\u002Fstrong\u003E, &#x26; \u003Cstrong\u003EPhone number\u003C\u002Fstrong\u003E will be stored with each individual user. Since this is a CRUD API, 4 types of endpoint need to be exposed.\u003Cbr\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EFirst, we will create our \u003Cstrong\u003EGET\u003C\u002Fstrong\u003E endpoint that will list all user details in our MongoDB database: \u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003EGET \u002Fget\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003EWe will be starting with an empty database. So, we need to create a \u003Cstrong\u003EPOST\u003C\u002Fstrong\u003E endpoint that will allow us to add user details:\u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003EPOST \u002Fadd\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003EThe third endpoint will be the \u003Cstrong\u003EPATCH\u003C\u002Fstrong\u003E method, this will allow us to update users information when we need to:\u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003EPATCH \u002Fupdate\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003EFinally, we have to create a \u003Cstrong\u003EDELETE\u003C\u002Fstrong\u003E endpoint incase we have to delete every information about a user:\u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003EDELETE \u002Fremove\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003EBy making these 4 endpoints, we will achieve our aim to create a CRUD API. Without wasting time further, open up any \u003Cstrong\u003Eterminal\u003C\u002Fstrong\u003E of choice, I will be using \u003Cstrong\u003EGit bash\u003C\u002Fstrong\u003E terminal.\u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Ch3 id=\"creating-our-project\"\u003E\u003Ca href=\"#creating-our-project\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E#Creating our project\u003C\u002Fh3\u003E\n\u003Cbr\u003E\n\u003Cp\u003EWe will kick off by making a folder called \u003Cstrong\u003EuserApp\u003C\u002Fstrong\u003E for our project. Afterwards, initialize a \u003Cstrong\u003Epackage.json\u003C\u002Fstrong\u003E file in the root by typing the \u003Cstrong\u003Enpm init -y\u003C\u002Fstrong\u003E command.\u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003EDev.Adewale ~\u002Fdocuments $ mkdir userApp\n\nDev.Adewale ~\u002Fdocuments $ cd userApp\n\nDev.Adewale ~\u002Fdocuments\u002FuserApp $ npm init -y\nWrote to C:\\Users\\Adeyemi\\documents\\userApp\\package.json:\n\n{\n  \"name\": \"userapp\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" &#x26;&#x26; exit 1\"\n  },\n  \"keywords\": [],\n  \"author\": \"\",\n  \"license\": \"ISC\"\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003E\u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EAfter project initialization, we'll have to install all dependencies that will make it somewhat easy for us to build our API and it's \u003Cstrong\u003ECRUD\u003C\u002Fstrong\u003E endpoints. So, open your terminal again and install üëá:\u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003Enpm i express mongoose --save\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003EWe have to install one more package, but to our \u003Cstrong\u003EdevDependencies\u003C\u002Fstrong\u003E this time around:\u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003Enpm i nodemon --save-dev\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003EHere's a breakdown of what we installed üïµÔ∏è‚Äç‚ôÇÔ∏è:\u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Ch3 id=\"express\"\u003E\u003Ca href=\"#express\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E#Express\u003C\u002Fh3\u003E\n\u003Cbr\u003E\n\u003Cp\u003EExpress is a fast, minimal and flexible \u003Cstrong\u003ENode\u003C\u002Fstrong\u003E web application framework. It comes with robust set of features that will allow us spin up our API \u003Cstrong\u003EServer\u003C\u002Fstrong\u003E without much complexity.\n\u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Ch3 id=\"mongoose\"\u003E\u003Ca href=\"#mongoose\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E#Mongoose\u003C\u002Fh3\u003E\n\u003Cbr\u003E\n\u003Cp\u003EWe installed the \u003Cstrong\u003Emongoose\u003C\u002Fstrong\u003E package instead of \u003Cstrong\u003Emongodb\u003C\u002Fstrong\u003E earlier, wondering why? It's because Mongoose is a wrapper package that provides more advanced features than using the MongoDB package.\u003C\u002Fp\u003E\n\u003Cbr\u003E\nMongoose is an Object Data Modeling (ODM) library that manages relationships between data, provides schema validation, and is used to create a connection between MongoDB and the Node.js runtime environment.\u003Cbr\u003E\u003C\u002Fbr\u003E\n\u003Ch3 id=\"nodemon\"\u003E\u003Ca href=\"#nodemon\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E#Nodemon\u003C\u002Fh3\u003E\n\u003Cbr\u003E\n\u003Cp\u003EWhile installing our dependencies, \u003Cstrong\u003Enodemon\u003C\u002Fstrong\u003E was installed to the \u003Cstrong\u003EdevDependencies\u003C\u002Fstrong\u003E section. Why? We really don't need this package in production, it's only useful while developing locally. Nodemon is a Node app wrapper that will watch for any file changes in our project and automatically restart our server.\n\u003Cbr\u003E\u003C\u002Fbr\u003E\nWithout it, we will have to restart the server manually everytime we make changes to any file in our project folder. Yikes üòñ, that will be stressful!\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003ENow, let's get our hands dirty with code...\n\u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Ch3 id=\"start-coding\"\u003E\u003Ca href=\"#start-coding\" aria-hidden=\"true\"\u003E\u003Cspan class=\"icon icon-link\"\u003E\u003C\u002Fspan\u003E\u003C\u002Fa\u003E#Start coding\u003C\u002Fh3\u003E\n\u003Cbr\u003E\n\u003Cp\u003ECreate a \u003Cstrong\u003Eserver.js\u003C\u002Fstrong\u003E file in the project root folder. You can name the JS file anything, it doesn't matter. This will be the entry point to our app. To start coding, open the \u003Cstrong\u003Epackage.json\u003C\u002Fstrong\u003E file and edit it like so üëá: \u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-json\"\u003E{\n  \"name\": \"userapp\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"dev\": \"nodemon server.js\"\n  },\n  \"keywords\": [],\n   \"type\": \"module\",\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"express\": \"^4.18.2\",\n    \"mongoose\": \"^6.7.2\"\n  },\n  \"devDependencies\": {\n    \"nodemon\": \"^2.0.20\"\n  }\n}\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003EWhat changed? If you noticed, we add a new text \u003Cstrong\u003E\"type\": \"module\"\u003C\u002Fstrong\u003E. This is notify the package file that we will be using \u003Cstrong\u003EES6\u003C\u002Fstrong\u003E syntax whenever we're importing a package in our code. \u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EWe also added a script of \u003Cstrong\u003E\"dev\": \"nodemon server.js\"\u003C\u002Fstrong\u003E. This will spin up our server, watch for file changes and automatically restart the server for us. \u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EIn \u003Cstrong\u003Eserver.js\u003C\u002Fstrong\u003E, write the following code:\u003Cbr\u003E\u003C\u002Fbr\u003E\u003C\u002Fp\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003E\u002F* Import express *\u002F\nimport express from \"express\";\n\n\u002F* Initialize express import *\u002F\nconst app = express()\n\n\u002F* Listen to server on a port *\u002F\nconst PORT = process.env.PORT || 3000\napp.listen(PORT, () =\u003E {\n    console.log(`it's alive on http:\u002F\u002Flocalhost:${PORT}`);\n})\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003EWe imported the \u003Cstrong\u003Eexpress\u003C\u002Fstrong\u003E package, stored and intialized it in a variable. The \u003Cstrong\u003Eapp\u003C\u002Fstrong\u003E variable will now give us access to all \u003Cstrong\u003Eexpress\u003C\u002Fstrong\u003E has to offer. At the end of the code, we started listening to our server on a port. Now open your terminal again and run \u003Cstrong\u003Enpm run dev\u003C\u002Fstrong\u003E, the name of the script we created in the \u003Cstrong\u003Epackage.json\u003C\u002Fstrong\u003E file. You should get the output below üëá:\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003EDev.Adewale ~\u002Fmongodb $ npm run dev\n\n\u003E userapp@1.0.0 dev\n\u003E nodemon server.js\n\n[nodemon] 2.0.20\n[nodemon] to restart at any time, enter `rs`\n[nodemon] watching path(s): *.*\n[nodemon] watching extensions: js,mjs,json  \n[nodemon] starting `node server.js`\nit's alive on http:\u002F\u002Flocalhost:3000\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003ENow that our server is up and running, let's connect to our MongoDB database. But first, open up \u003Cstrong\u003EMongoDB Compass\u003C\u002Fstrong\u003E and grab your local database installation \u003Cstrong\u003EURI\u003C\u002Fstrong\u003E. Then, create a \u003Cstrong\u003Edb.js\u003C\u002Fstrong\u003E file in the project root folder and make the following changes üëá:\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003E\u002F* Import mongoose *\u002F\nimport mongoose from \"mongoose\";\n\n\u002F* Store local MongoDB uri ending with your database name *\u002F\nconst uri = \"mongodb:\u002F\u002Flocalhost:27017\u002FUserDB\" \u002F* &#x3C;- Database name *\u002F\n\n\u002F* Connect to DB *\u002F\nmongoose.connect(uri, {\n    useNewUrlParser: true\n})\n\n\u002F* Store connection instance *\u002F\nconst db = mongoose.connection\n\n\u002F* Callback function to let us know when we're connected *\u002F\ndb.once(\"open\", () =\u003E {\n    console.log(\"Connected to MongoDB!\");\n})\n\n\u002F* Export the store connection instance *\u002F\nexport default db\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003ENow navigate back to the \u003Cstrong\u003Eserver.js\u003C\u002Fstrong\u003E file and import the \u003Cstrong\u003Edb.js\u003C\u002Fstrong\u003E file at the top-level:\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003E\u002F* Import database connection to MongoDB *\u002F\nimport db from \".\u002Fdb.js\";\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003EAfterwards, you should see some additional changes in the terminal output like below üëá:\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-bash\"\u003EDev.Adewale ~\u002Fmongodb $ npm run dev\n\n\u003E userapp@1.0.0 dev\n\u003E nodemon server.js\n\n[nodemon] 2.0.20\n[nodemon] to restart at any time, enter `rs`\n[nodemon] watching path(s): *.*\n[nodemon] watching extensions: js,mjs,json  \n[nodemon] starting `node server.js`\nit's alive on http:\u002F\u002Flocalhost:3000\nConnected to MongoDB!\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003ENext, we will be creating a model that will enforce the structure of user's data that will be stored in our database. Create a \u003Cstrong\u003Emodel\u003C\u002Fstrong\u003E folder in the project root folder and also create a \u003Cstrong\u003EUser.js\u003C\u002Fstrong\u003E file inside it. Let's make some changes üëá:\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003E\u002F* Import mongoose *\u002F\nimport mongoose from \"mongoose\";\n\n\u002F* Create a schema *\u002F\nconst userSchema = new mongoose.Schema({\n  \n    email: {\n        type: String,\n        required: true\n    },\n\n    name: {\n        type: String,\n        required: true\n    },\n\n    phoneNumber: {\n        type: Number,\n        required: true\n    }\n\n})\n\n\u002F* Export the model *\u002F\nexport default mongoose.model(\"Users\", userSchema)\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003EWe also have to setup routes handler that will respond to our endpoints. First create a \u003Cstrong\u003Eroutes\u003C\u002Fstrong\u003E folder containing \u003Cstrong\u003Erouter.js\u003C\u002Fstrong\u003E file. Make changes to the \u003Cstrong\u003Erouter.js\u003C\u002Fstrong\u003E file like so üëá:\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003E\u002F* Import express *\u002F\nimport express from 'express'\n\n\u002F* Init express Router *\u002F\nconst Router = express.Router()\n\n\u002F* Export the Router variable *\u002F\nexport default Router\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E \n\u003Cp\u003EIn the \u003Cstrong\u003Eserver.js\u003C\u002Fstrong\u003E file, we have to create a \u003Cstrong\u003Emiddleware\u003C\u002Fstrong\u003E that will intercept every request we're getting and redirect them to the \u003Cstrong\u003Erouter.js\u003C\u002Fstrong\u003E file where they will be handled üëá:\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003E\u002F* Import express *\u002F\nimport express from \"express\";\n\n\u002F* Import database connection to MongoDB *\u002F\nimport db from \".\u002Fdb.js\";\n\n\u002F* Import Router *\u002F\nimport Router from \".\u002Froutes\u002Frouter.js\";\n\n\u002F* Init express instance *\u002F\nconst app = express()\n\n\u002F* MIDDLEWARE STARTS *\u002F\n\n\u002F* Redirect requests to Router *\u002F\napp.use('\u002F', Router)\n\n\u002F* MIDDLEWARE ENDS *\u002F\n\n\u002F* Listening to port *\u002F\nconst PORT = process.env.PORT || 3000\napp.listen(PORT, () =\u003E {\n    console.log(`it's alive on http:\u002F\u002Flocalhost:${PORT}`);\n})\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003EWe can now proceed to setup every endpoints in the \u003Cstrong\u003Erouter.js\u003C\u002Fstrong\u003E file. The first endpoint is the \u003Cstrong\u003EGET\u003C\u002Fstrong\u003E method, import the \u003Cstrong\u003Emodel\u003C\u002Fstrong\u003E created earlier in the router file. Then it can be used to communicate with our MongoDB database üëá:\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003E\u002F* Import mongoose schema *\u002F\nimport User from '..\u002Fmodel\u002FUser.js'\n\n\u002F* Get all method *\u002F\nRouter.get('\u002Fget', async (req, res) =\u003E {\n\n    const get = await User.find()\n    res.send(get)\n})\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003ENow find an \u003Cstrong\u003EAPI client\u003C\u002Fstrong\u003E to test our first endpoint, I recommend \u003Cstrong\u003EPostman\u003C\u002Fstrong\u003E or \u003Cstrong\u003EInsomnia\u003C\u002Fstrong\u003E if you prefer a desktop client. Paste in the \u003Cstrong\u003Elocalhost\u003C\u002Fstrong\u003E URL followed by the corresponding \u003Cstrong\u003Eendpoint\u003C\u002Fstrong\u003E. It should look like so üëâ: \u003Cstrong\u003E\u003Ca href=\"http:\u002F\u002Flocalhost:3000\u002Fget\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttp:\u002F\u002Flocalhost:3000\u002Fget\u003C\u002Fa\u003E\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003ENote that you're going to get an empty response for now because we have nothing in our database. Next, we're going to create a \u003Cstrong\u003EPOST\u003C\u002Fstrong\u003E endpoint and fill our database with some documents.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003ENavigate back to \u003Cstrong\u003Erouter.js\u003C\u002Fstrong\u003E and setup the \u003Cstrong\u003EPOST\u003C\u002Fstrong\u003E endpoint üëá:\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003E\u002F* Post method *\u002F\nRouter.post('\u002Fadd', async (req, res) =\u003E {\n\n    const addUser = new User({\n        email: req.body.email,\n        name: req.body.name,\n        phoneNumber: req.body.phoneNumber\n    })\n\n    await addUser.save()\n    res.send(addUser)\n})\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003ETo test our post endpoint, open up any API client you're using and send a POST request. Check your \u003Cstrong\u003EMongoDB Compass\u003C\u002Fstrong\u003E afterwards and you should see a new \u003Cstrong\u003EDatabase name\u003C\u002Fstrong\u003E with a \u003Cstrong\u003ECollection\u003C\u002Fstrong\u003E containing the \u003Cstrong\u003Edata\u003C\u002Fstrong\u003E you just sent.\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cp\u003EThe \u003Cstrong\u003EPOST\u003C\u002Fstrong\u003E endpoint is up, what if we have to delete a user data? Let's continue by creating a \u003Cstrong\u003EDELETE\u003C\u002Fstrong\u003E endpoint in the \u003Cstrong\u003Erouter.js\u003C\u002Fstrong\u003E file üëá:\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003E\u002F* Delete method *\u002F\nRouter.delete('\u002Fremove\u002F:id', async (req, res) =\u003E {\n    \n    const remove = await User.deleteOne({_id: req.params.id})\n    res.send(remove)\n})\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003EThe last endpoint we will be creating is the \u003Cstrong\u003EPATCH\u003C\u002Fstrong\u003E method, this will allow us to edit and update existing users data store in our database. Navigate back to the \u003Cstrong\u003Erouter.js\u003C\u002Fstrong\u003E file and make new changes üëá:\u003C\u002Fp\u003E\n\u003Cbr\u003E\n\u003Cpre\u003E\u003Ccode class=\"language-javascript\"\u003E\u002F* Patch method *\u002F\nRouter.patch('\u002Fupdate\u002F:id', async (req, res) =\u003E {\n    \n    const update = await User.findByIdAndUpdate(req.params.id, req.body, {new: true})\n    res.send(update)\n})\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cbr\u003E\n\u003Cp\u003EMake sure to test if all endpoints is functional and working as expected in any API client of your choice. If you have any questions or you're getting an error, be sure to comment. I will try to give a valid response as soon as I can. Bye for now üôã‚Äç‚ôÇÔ∏è!\u003C\u002Fp\u003E\n","tags":[{"id":"backend","title":"backend","path":"\u002Ftag\u002Fbackend\u002F"},{"id":"api","title":"api","path":"\u002Ftag\u002Fapi\u002F"}]}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.cddbf094.js" defer></script><script src="/assets/js/page--src-templates-articles-vue.3c524e7d.js" defer></script>
  </body>
</html>
